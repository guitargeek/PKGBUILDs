# Maintainer: Jonas Rembser <jonas.rembser@gmail.com>

pkgname=dd4hep
pkgver=01.10
pkgrel=1
arch=("i686" "x86_64")
url="https://github.com/AIDASoft/DD4hep"
provides=("dd4hep")
source=("git+https://github.com/AIDASoft/DD4hep#tag=v01-10")
sha512sums=('SKIP')

build() {
    cd "${srcdir}/DD4hep"

    mkdir build
    cd build

    cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr \
          -DDD4HEP_USE_GEANT4=ON \
          -DDD4HEP_IGNORE_GEANT4_TLS=True \
          -DBoost_NO_BOOST_CMAKE=OFF \
          -DDD4HEP_USE_LCIO=OFF \
          -DBUILD_TESTING=ON \
          -DROOT_DIR=$ROOTSYS \
          -DCMAKE_CXX_STANDARD=17 \
          ..

    make -j8
}

package() {
    cd "${srcdir}/DD4hep"
    mkdir $pkgdir/usr
    cd build
    make DESTDIR="$pkgdir/" install
}
